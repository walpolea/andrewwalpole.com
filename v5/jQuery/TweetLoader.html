<!DOCTYPE html>
<html>
<head>
<title>Twitter Widget</title>

<style type="text/css">
	
	body {
		font-family:Tahoma, Geneva, sans-serif;	
		background:#222222;
	}
	
	#widget {
		background: #E5E5E5;
		margin: auto;
		padding: 5px;
		width: 250px;
		
		box-shadow: 1px 2px 6px rgba(0, 0, 0, 0.5);
		
		-webkit-border-radius: 8px;
		-moz-border-radius: 8px;
		border-radius: 8px;
	}
	
	#search {
			
		text-align:center;
	}
	
	#tweets {
		
	}
	
	.tweet {
		margin:2px 0;
		padding:2px;
	
		width:240px;
		height: 54px;
		
		font-size: 10px;
		background:f0f0f0;
	}
	
	.tweet > img {
		margin:2px;
		border:1px solid #ffffff;	
		float:left;
	}
	
	.bevel {
		border-top:1px solid #ffffff;
		border-left:1px solid #ffffff;
		border-bottom:1px solid #AAA;
		border-right:1px solid #AAA;	
	}
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

	//set the document.ready function
	$(init);
	
	function init() {
	
		$("html").addClass("js");
		
		var tweetLoader = {
			container:$("#tweets"),
			searchForm:$("#search"),
			
			init: function() {
				tweetLoader.container.hide();
				tweetLoader.searchForm.find("button").eq(0).on("click", function(e) {
					tweetLoader.load( tweetLoader.searchForm.find("#searchtext").val() );
				});
				
			},
			
			load: function( q ) {
				tweetLoader.container.slideUp();
				$.getJSON( "http://search.twitter.com/search.json?callback=?", {q:q, rpp:10}, tweetLoader.create);
			},
			
			loadPage: function( qstr ) {
				//tweetLoader.container.slideUp();
				$.getJSON( "http://search.twitter.com/search.json"+qstr+"&callback=?", tweetLoader.create);
			},
			
			create: function( data ) {
				
				console.log(data);
				var container = $("div#tweets");
				
				container.empty();
				
				
				$.each( data.results, function(i, item) {
					
					
					var t = $("<div></div>", {
						class:"tweet",
						id:"tweet"+i
					})
						.appendTo(container)
						.addClass("bevel");;
					
					$("<img />", {
						src:item.profile_image_url,
						alt:item.from_user_name,
						height:"48",
						width:"48"
					})
						.appendTo(t)
						.addClass("bevel");
					
					$("<span></span>", {class:"tweetcontent"}).appendTo(t)
								.text( item.text );
						
									 
					container.slideDown();
				});
				
				var pager = $("<div></div>", {id:"pager"} ).appendTo( container );
				
				if( data.previous_page ) {
				
					$("<button id=previous>Prev</button>")
						.on("click", function(e) {
								tweetLoader.loadPage( data.previous_page );
						})
						.appendTo(pager);
				
				}
				
				if( data.next_page && data.page < (100/data.results_per_page)) {
					
					$("<button id=next>Next</button>")
						.on("click", function(e) {
							tweetLoader.loadPage( data.next_page );
						})
						.appendTo(pager);
				}
			}
		}
		
		tweetLoader.init();
	}
	
	
	
	
	
</script>


</head>
<body>
	<div id="widget">
        <div id="search">
           <input type="text" id="searchtext" />
           <button>Search</button>
        </div>
        <div id="tweets">
        </div>
    </div>
</body>

</html>